!function(t){
    t.fn.countdown = function(e, n) {
        function o() {
            var t = new Date(r.date),
                e = s(),
                o = t - e;

            if (0 >= o) {
                clearInterval(d);
                if (n && "function" == typeof n) {
                    n();
                }
                return;
            }

            var a = 1e3,
                f = 60 * a,
                u = 60 * f,
                l = 24 * u,
                c = Math.floor(o / l), // Calculate days
                h = Math.floor((o % l) / u), // Calculate hours
                x = Math.floor((o % u) / f), // Calculate minutes
                g = Math.floor((o % f) / a); // Calculate seconds

            c = String(c).length >= 2 ? c : "0" + c;
            h = String(h).length >= 2 ? h : "0" + h;
            x = String(x).length >= 2 ? x : "0" + x;
            g = String(g).length >= 2 ? g : "0" + g;

            i.find(".days").text(c);
            i.find(".hours").text(h);
            i.find(".minutes").text(x);
            i.find(".seconds").text(g);
        }

        var r = t.extend({
            date: null,
            offset: null,
            day: "Day",
            days: "Days",
            hour: "Hour",
            hours: "Hours",
            minute: "Minute",
            minutes: "Minutes",
            second: "Second",
            seconds: "Seconds"
        }, e);

        r.date || t.error("Date is not defined.");
        Date.parse(r.date) || t.error("Incorrect date format, it should look like this, 12/24/2012 12:00:00.");
        var i = this,
            s = function() {
                var t = new Date,
                    e = t.getTime() + 6e4 * t.getTimezoneOffset(),
                    n = new Date(e + 36e5 * r.offset);
                return n;
            },
            d = setInterval(o, 1e3);
    }
}(jQuery);